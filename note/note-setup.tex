%================================
% note-setup.tex
% fenglielie@qq.com 2025-05-03
%================================

\usepackage{amsmath,amsthm,amsfonts,amssymb}
\usepackage{mathrsfs}
\usepackage{bm}
\usepackage{mathtools}
\usepackage{float}
\usepackage{appendix}
\usepackage{indentfirst}
\usepackage{silence}
\usepackage{anyfontsize}
\usepackage{xpatch}
\usepackage{extarrows}
\usepackage{booktabs,multirow,multicol}
\usepackage{calligra}
\usepackage{framed}
\usepackage{subcaption}

\usepackage[dvipsnames]{xcolor}
\usepackage[a4paper, margin=1in]{geometry}

\usepackage{graphicx}
\graphicspath{
    {./figure/}{./figures/}{./image/}{./images/}{./graphic/}{./graphics/}{./picture/}{./pictures/}
}

\usepackage[shortlabels,inline]{enumitem}
\setlist{nolistsep}

\usepackage[ruled,linesnumbered,noline]{algorithm2e}

\usepackage{listings}
\lstdefinestyle{simpleStyle}{
    basicstyle=\ttfamily\small,
    breaklines=true,
    keywordstyle=\color{blue},
    identifierstyle=\color{black},
    stringstyle=\color{violet},
    commentstyle=\color[RGB]{34,139,34},
    showstringspaces=false,
    numbers=left,
    numbersep=2em,
    numberstyle=\footnotesize,
    frame=single,
    framesep=1em,
}
\lstset{style=simpleStyle}

\usepackage[colorlinks=true,linkcolor=cyan,urlcolor=magenta,citecolor=violet]{hyperref}

\renewcommand*{\proofname}{\normalfont\bfseries Proof}

\usepackage{thmtools}

\usepackage[framemethod=TikZ]{mdframed}
\mdfsetup{skipabove=0.5em,skipbelow=0.5em}

\newcommand{\mydeclaretheoremstyle}[3]{%
    \declaretheoremstyle[
        headfont=\bfseries\sffamily#2,
        bodyfont=\normalfont,
        mdframed={nobreak=true,#3}
    ]{#1}}


\mydeclaretheoremstyle{purplehalfbox}{\color{RoyalPurple!70!black}}{linewidth=2pt,rightline=false, topline=false, bottomline=false,linecolor=RoyalPurple,backgroundcolor=RoyalPurple!8}

\declaretheorem[style=purplehalfbox, name=Theorem, numbered=yes, numberwithin=section]{theorem}
\declaretheorem[style=purplehalfbox, name=Theorem, numbered=no]{theorem*}

\declaretheorem[style=purplehalfbox, name=Proposition, numbered=yes, sibling=theorem]{proposition}
\declaretheorem[style=purplehalfbox, name=Proposition, numbered=no]{proposition*}

\mydeclaretheoremstyle{bluehalfbox}{\color{SkyBlue!70!black}}{linewidth=2pt,rightline=false, topline=false, bottomline=false,linecolor=NavyBlue,backgroundcolor=SkyBlue!8}

\declaretheorem[style=bluehalfbox, name=Corollary, numbered=yes, sibling=theorem]{corollary}
\declaretheorem[style=bluehalfbox, name=Corollary, numbered=no]{corollary*}

\declaretheorem[style=bluehalfbox, name=Lemma, numbered=yes, sibling=theorem]{lemma}
\declaretheorem[style=bluehalfbox, name=Lemma, numbered=no]{lemma*}

\declaretheorem[style=bluehalfbox, name=Claim, numbered=yes, sibling=theorem]{claim}
\declaretheorem[style=bluehalfbox, name=Claim, numbered=no]{claim*}

\mydeclaretheoremstyle{greenfullbox}{\color{ForestGreen!40!black}}{linewidth=1pt,linecolor=ForestGreen,backgroundcolor=ForestGreen!5}

\declaretheorem[style=greenfullbox, name=Definition, numbered=yes, numberwithin=section]{definition}
\declaretheorem[style=greenfullbox, name=Definition, numbered=no]{definition*}

\mydeclaretheoremstyle{redfullbox}{\color{RawSienna!70!black}}{linewidth=1pt,linecolor=RawSienna,backgroundcolor=RawSienna!5}

\declaretheorem[style=redfullbox, name=Example, numbered=yes, numberwithin=section]{example}
\declaretheorem[style=redfullbox, name=Example, numbered=no]{example*}

\mydeclaretheoremstyle{pinkemptybox}{\color{WildStrawberry!70!black}}{linewidth=0pt,linecolor=WildStrawberry,backgroundcolor=WildStrawberry!5}

\declaretheorem[style=pinkemptybox, name=Problem, numbered=yes, numberwithin=section]{problem}
\declaretheorem[style=pinkemptybox, name=Problem, numbered=no]{problem*}

\mydeclaretheoremstyle{brownemptybox}{\color{brown!70!black}}{leftline=false, rightline=false, topline=false, bottomline=false,skipabove=0em,skipbelow=0em}

\declaretheorem[style=brownemptybox, name=Remark, numbered=yes, numberwithin=section]{remark}
\declaretheorem[style=brownemptybox, name=Remark, numbered=no]{remark*}

\declaretheoremstyle[headfont=\bfseries, bodyfont=\normalfont, spaceabove=6pt, spacebelow=6pt, qed=\ensuremath{\square}]{solutionstyle}

\declaretheorem[style=solutionstyle, name=Solution, numbered=yes, numberwithin=section]{solution}
\declaretheorem[style=solutionstyle, name=Solution, numbered=no]{solution*}

\usepackage[most,many,breakable]{tcolorbox}
\usetikzlibrary{arrows,calc,shadows.blur}
\tcbuselibrary{skins}

% note
\newtcolorbox{note}[1][]{%
    enhanced jigsaw,
    colback=gray!10!white,
    colframe=gray!80!black,
    size=small,
    boxrule=1pt,
    title=\textbf{Note},
    halign title=flush center,
    coltitle=black,
    breakable,
    attach boxed title to top left={xshift=1cm,yshift=-\tcboxedtitleheight/2,yshifttext=-\tcboxedtitleheight/2},
    minipage boxed title=1.5cm,
    boxed title style={%
            colback=white,
            size=fbox,
            boxrule=1pt,
            boxsep=2pt,
            underlay={%
                    \coordinate (dotA) at ($(interior.west) + (-0.5pt,0)$);
                    \coordinate (dotB) at ($(interior.east) + (0.5pt,0)$);
                    \begin{scope}
                        \clip (interior.north west) rectangle ([xshift=3ex]interior.east);
                        \filldraw [white, blur shadow={shadow opacity=60, shadow yshift=-.75ex}, rounded corners=2pt] (interior.north west) rectangle (interior.south east);
                    \end{scope}
                    \begin{scope}[gray!80!black]
                        \fill (dotA) circle (2pt);
                        \fill (dotB) circle (2pt);
                    \end{scope}
                },
        },
    #1,
}
