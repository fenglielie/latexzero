% note-setup.tex
% 2024-10-07

\usepackage{amsmath,amsthm,amsfonts,amssymb}
\usepackage{mathrsfs}
\usepackage{bm}
\usepackage{mathtools}
\usepackage{float}
\usepackage{appendix}
\usepackage{indentfirst}
\usepackage{silence}
\usepackage{anyfontsize}
\usepackage{xpatch}
\usepackage{extarrows}
\usepackage{booktabs,multirow,multicol}
\usepackage{calligra}
\usepackage{framed}
\usepackage{subcaption}

\usepackage[usenames,dvipsnames]{xcolor}
\usepackage[a4paper, margin=1in]{geometry}

\usepackage{graphicx}
\graphicspath{
    {./figure/}{./figures/}{./image/}{./images/}{./graphic/}{./graphics/}{./picture/}{./pictures/}
}

\usepackage[shortlabels,inline]{enumitem}
\setlist{nolistsep}

\usepackage[ruled,linesnumbered,noline]{algorithm2e}

\usepackage{listings}
\lstdefinestyle{mystyle}{
    basicstyle=\small\ttfamily,
    commentstyle=\color[RGB]{34,139,34},
    keywordstyle=\color[RGB]{0,0,255},
    numberstyle=\tiny\color{gray},
    stringstyle=\color[RGB]{128,0,128},
    identifierstyle=\color{black},
    showstringspaces=false,
    tabsize=4,
    breaklines=true,
    numbers=left,
    frame=single,
    rulecolor=\color{black},
    captionpos=b,
    xleftmargin=\parindent,
    aboveskip=\baselineskip,
    belowskip=\baselineskip,
    escapeinside={\%*}{*)},
}
\lstset{style=mystyle}

\usepackage[colorlinks=true,linkcolor=cyan,urlcolor=magenta,citecolor=violet]{hyperref}

\renewcommand*{\proofname}{\normalfont\bfseries Proof}

\usepackage{thmtools}

\usepackage[framemethod=TikZ]{mdframed}
\mdfsetup{skipabove=0.5em,skipbelow=0.5em}

\newcommand{\mydeclaretheoremstyle}[3]{%
\declaretheoremstyle[
    headfont=\bfseries\sffamily#2,
    bodyfont=\normalfont,
    mdframed={nobreak=true,#3}
]{#1}}

\mydeclaretheoremstyle{purplehalfbox}{\color{RoyalPurple!70!black}}{linewidth=2pt,rightline=false, topline=false, bottomline=false,linecolor=RoyalPurple,backgroundcolor=RoyalPurple!8}
\mydeclaretheoremstyle{bluehalfbox}{\color{SkyBlue!70!black}}{linewidth=2pt,rightline=false, topline=false, bottomline=false,linecolor=NavyBlue,backgroundcolor=SkyBlue!8}
\mydeclaretheoremstyle{greenfullbox}{\color{ForestGreen!40!black}}{linewidth=1pt,linecolor=ForestGreen,backgroundcolor=ForestGreen!5}
\mydeclaretheoremstyle{redfullbox}{\color{RawSienna!70!black}}{linewidth=1pt,linecolor=RawSienna,backgroundcolor=RawSienna!5}
\mydeclaretheoremstyle{pinkemptybox}{\color{WildStrawberry!70!black}}{linewidth=0pt,linecolor=WildStrawberry,backgroundcolor=WildStrawberry!5}
\mydeclaretheoremstyle{brownemptybox}{\color{brown!70!black}}{leftline=false, rightline=false, topline=false, bottomline=false,skipabove=0em,skipbelow=0em}

% solution
\declaretheoremstyle[
  headfont=\bfseries,
  bodyfont=\normalfont,
  spaceabove=6pt,
  spacebelow=6pt,
]{solutionstyle}

%================================
% usage:
% \newcommand{\noteusemdframed}{true}
% \newcommand{\noteusemdframed}{false}
%================================

\ifx\noteusemdframed\undefined
    \newcommand{\noteusemdframed}{false}
\fi

\ifthenelse{\equal{\noteusemdframed}{true}}{

    \declaretheorem[style=purplehalfbox, numbered=yes, name=Theorem, numberwithin=section]{theorem}
    \declaretheorem[style=purplehalfbox, numbered=yes, name=Proposition, sibling=theorem]{proposition}

    \declaretheorem[style=bluehalfbox, numbered=yes, name=Corollary, sibling=theorem]{corollary}
    \declaretheorem[style=bluehalfbox, numbered=yes, name=Lemma, sibling=theorem]{lemma}
    \declaretheorem[style=bluehalfbox, numbered=yes, name=Claim, sibling=theorem]{claim}

    \declaretheorem[style=greenfullbox, numbered=yes, name=Definition, numberwithin=section]{definition}
    \declaretheorem[style=redfullbox, numbered=yes, name=Example, numberwithin=section]{example}

    \declaretheorem[style=pinkemptybox, numbered=yes, name=Problem, numberwithin=section]{problem}
    \declaretheorem[style=solutionstyle, numbered=no, name=Solution]{solution}

    \declaretheorem[style=brownemptybox, numbered=yes, name=Remark, numberwithin=section]{remark}
    \declaretheorem[style=brownemptybox, numbered=no, name=Remark]{remark*}
}{
    \declaretheorem[style=plain, numbered=yes, name=Theorem, numberwithin=section]{theorem}
    \declaretheorem[style=plain, numbered=yes, name=Proposition, sibling=theorem]{proposition}

    \declaretheorem[style=plain, numbered=yes, name=Corollary, sibling=theorem]{corollary}
    \declaretheorem[style=plain, numbered=yes, name=Lemma, sibling=theorem]{lemma}
    \declaretheorem[style=plain, numbered=yes, name=Claim, sibling=theorem]{claim}

    \declaretheorem[style=definition, numbered=yes, name=Definition, numberwithin=section]{definition}
    \declaretheorem[style=definition, numbered=yes, name=Example, numberwithin=section]{example}

    \declaretheorem[style=definition, numbered=yes, name=Problem, numberwithin=section]{problem}
    \declaretheorem[style=solutionstyle, numbered=no, name=Solution]{solution}

    \declaretheorem[style=remark, numbered=yes, name=Remark, numberwithin=section]{remark}
    \declaretheorem[style=remark, numbered=no, name=Remark]{remark*}
}


%================================
% NOTE BOX
%================================

\usepackage[most,many,breakable]{tcolorbox}

\usetikzlibrary{arrows,calc,shadows.blur}
\tcbuselibrary{skins}
\newtcolorbox{note}[1][]{%
	enhanced jigsaw,
	colback=gray!10!white,
	colframe=gray!80!black,
	size=small,
	boxrule=1pt,
	title=\textbf{Note},
	halign title=flush center,
	coltitle=black,
	breakable,
	attach boxed title to top left={xshift=1cm,yshift=-\tcboxedtitleheight/2,yshifttext=-\tcboxedtitleheight/2},
	minipage boxed title=1.5cm,
	boxed title style={%
			colback=white,
			size=fbox,
			boxrule=1pt,
			boxsep=2pt,
			underlay={%
					\coordinate (dotA) at ($(interior.west) + (-0.5pt,0)$);
					\coordinate (dotB) at ($(interior.east) + (0.5pt,0)$);
					\begin{scope}
						\clip (interior.north west) rectangle ([xshift=3ex]interior.east);
						\filldraw [white, blur shadow={shadow opacity=60, shadow yshift=-.75ex}, rounded corners=2pt] (interior.north west) rectangle (interior.south east);
					\end{scope}
					\begin{scope}[gray!80!black]
						\fill (dotA) circle (2pt);
						\fill (dotB) circle (2pt);
					\end{scope}
				},
		},
	#1,
}
